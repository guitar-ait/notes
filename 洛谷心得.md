# 洛谷心得

## 表达式类型提升(避免输出小数)

```c++
#include<iostream>
int a,b,c;
int main() {
    std::cin >> a >> b >> c;
    //表达式类型提升：当 int 与 double 进行运算时，int 会被自动提升为 double
    std::cout << a * 0.2 + b * 0.3 + c * 0.5;
    return 0;
}
// 方法1：强制转换为整数（直接截断小数）
std::cout << (int)(a * 0.2 + b * 0.3 + c * 0.5);

// 方法2：四舍五入
std::cout << (int)(a * 0.2 + b * 0.3 + c * 0.5 + 0.5);

// 方法3：使用整数运算避免浮点数
std::cout << (a * 2 + b * 3 + c * 5) / 10;
```

## 向上取整公式

公式：$[\frac{b}{a}]=\frac{a+b-1}{a}$

## 默认输出

```c++
//在C++中，整数除法默认会截断小数部分
cout << 500 / 3;//输出166
//如果想要四舍五入，需要转换为浮点数运算
//默认情况下，cout 对浮点数输出最多6位有效数字
cout << 500.0 / 3;//输出166.667
```

## 开平方函数sqrt

```c++
#include<iostream>
#include<cmath>
int main() {
    //cout对浮点数最多输出6为有效数字
    cout << sqrt(6 * 6 + 9 * 9);
    return 0;
}
```

## 使用bool判断，而非if

```C++
#include <iostream>
using namespace std;
int main() {
    int x; cin >> x;
    //直接用bool变量保存比较运算的返回值，比if语句更简洁
    bool p1 = x%2 == 0, p2 = x>4 && x<=12;
    cout << (p1&&p2) << " " << (p1||p2) << " " << (p1!=p2) << " " << (!p1&&!p2);
    return 0;
}
```

## 简单排序

```C++
#include <iostream>
using namespace std;
int main()
{
    int a,b,c;
    cin>>a>>b>>c;
    if(a>b)swap(a,b);
    if(b>c)swap(b,c);
    if(a>b)swap(a,b);
    cout<<a<<' '<<b<<' '<<c;
}
```

## 判断闰年

- 公历年份是 4 的倍数，且不是 100 的倍数。

- 如果这是 100 的倍数，必须是 400 的倍数才是闰年。

- 其他情况就是平年。

  ```C++
  #include<iostream>
  using namespace std;
  int main() {
      int n;
  	cin >> n;
  	if ( (n % 4 == 0 && n % 100 != 0) || n % 400 == 0) cout << 1;
  	else cout << 0;
  }
  ```

  大月31天，小月30天，二月28天（闰年29天）。

  大月：1,3,5,7,8,10,12.

  小月：2,4,6,9,11.

  有一首童谣这样唱：

  > 一三五七八十腊，
  >
  > 三十一天永不差。
  >
  > 四六九冬三十整，
  >
  > 二月二八或二九。

## 运算符优先级总览

1. **`( )` 括号**
   - **作用**：拥有最高的优先级，强制改变运算顺序。括号内的表达式会最先被计算。
2. **`\*`， `/`， `%` 乘法、除法、取模**
   - **特点**：优先级相同。
   - **结合性**：**从左到右**。当它们连续出现时，最左边的操作先执行。
3. **`+`， `-` 加法、减法**
   - **特点**：优先级相同。
   - **结合性**：**从左到右**。
4. **`=` 赋值**
   - **作用**：拥有最低的优先级。它会将右边整个表达式的结果计算完毕后，才赋值给左边的变量。

## 输入的是(字符||字符串||数字)？

例：1.1 2 3：d个数字

​		2.123：1个数字

​		3.123-456-789-0：字符串

​		4.246785237467892107439821768549821772637868293......：超出了longlong最大值，要当作char类型一个个接收，再用‘char’ - ‘0’转换成数字。为了方便大数计算，转换的数字要逆向存进数组里。

如果用int类型的变量接收并存储

## iomanip头文件

### 1. `setw(n)` - 设置字段宽度

- 设置下一个输出项的最小字段宽度为 `n` 个字符
- **作用范围**：只对**紧随其后**的一个输出项有效
- 如果输出的数据长度小于 `n`，会用填充字符补齐
- 如果输出的数据长度大于等于 `n`，按实际长度输出

### 2. `setfill(c)` - 设置填充字符

- 设置当字段宽度大于数据长度时使用的填充字符
- **作用范围**：从设置点开始，影响之后的所有输出，直到被重新设置
- 默认填充字符是空格

## 阶乘算法(大数处理)

```C++
#include<iosream>
using namespace std;
int main() {
    int n;
    //13!就超过了int最大值，20！就超过了longlong最大值
    long long int S = 0,factorial = 1;
    cin >> n;
    for(int i = 1; i <= n; i++) {
        //计算每个n！，利用n!(上个循环的factorial)乘以i(n + 1)计算下一个阶乘(n + 1)!
        factorial *= i;
        S += factorial;
    }
    cout << S;
    return 0;
}
```

> 对于阶乘计算，特别是n较大时，应该预先考虑使用大数处理 



## 高精度算法

### 1. 大数加法

```C++
#include<iostream>
using namespace std;
int main() {
	string s1,s2;
	//将数组各元素都初始化为0 
	int a1[210] = {0},a2[210] = {0},a3[210] = {0};
	getline(cin,s1);
	getline(cin,s2); 
	//将字符转化成数字存进数组中
	for(int i = 0; i < s1.size(); i++) {
		//数组第n位数比下标idx大1，idx = n - 1 
		//将数字逆向存入数组，也就是把个位放在最前面，方便模拟进位计算 
		a1[s1.size() - 1 - i] = s1[i] - '0';
	} 
	for(int i = 0; i < s2.size(); i++) {
		a2[s2.size() - 1 - i] = s2[i] - '0';
	} 
	//a1,a2逐位相加，需要判断循环次数
	int numLen = max(s1.size(),s2.size());
	//模拟进位计算求和，从数组第一位也就是个位开始 
	int up = 0;
   	for(int i = 0; i < numLen; i++) {
		int sum = a1[i] + a2[i] + up;
		a3[i] = sum % 10;
		up = sum / 10;
	} 
	//考虑特殊情况：若最高位有进位，需要额外处理 
	if(up > 0) {
		a3[numLen] = up;	
		numLen++;	
	} 
	 
	//逆向输出结果
	//创建一个关闭的开关 
	bool start = false;
	for(int i = 209; i >= 0; i--) {
		//等到遍历到大数的位置了，开关打开 
		if(a3[i] != 0) start = true;
		//开关打开后，开始输出大数 
		if(start) cout << a3[i]; 
	} 
	//考虑特殊情况：如果计算结果为零，则开关不会打开 
	if(!start) cout << "0"; 
	return 0;	
} 

```



### 2. 大数减法

```C++

```

### 3.大数乘法

```C++

```

## 计算机大概的运行速度

- 普通计算机每秒能执行约1亿到10亿次简单操作

- 竞赛题目通常要求1秒内完成

## 利用开关跳出多层循环

```C++
#include<iostream>
using namespace std;
int main() {
    bool start = false;
    for() {
        if(start) {
            break;
        }
        for() {
            if(要跳出多层循环) {
                start = true;
                break;
            }
        }
    }       
    return 0;
}

```

在每一层循环里都放一个if(start) {break;}一旦开关打开，就会一层层跳出循环。

要避免继续执行循环中的语句，就要把if语句放在这层循环的最前面

## 求素数

## 递归求斐波那契数列

```C++
#include<iostream>
using namespace std;

    int fibonacci(int n) {
        //基本情况
        if(n == 0) return 0;
        if(n == 1) return 1;
        return fibonacci(n - 1) + fibonacci(n - 2);
    }

int main() {
	int n;
    cin >> n;
	cout << fibonacci(n);    
    return 0;
}
```

